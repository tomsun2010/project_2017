/*
 * include/ambas_common.h
 *
 * History:
 *    2008/10/23 - [Anthony Ginger] Create
 *
 * Copyright (C) 2004-2008, Ambarella, Inc.
 *
 * All rights reserved. No Part of this file may be reproduced, stored
 * in a retrieval system, or transmitted, in any form, or by any means,
 * electronic, mechanical, photocopying, recording, or otherwise,
 * without the prior consent of Ambarella, Inc.
 */

#ifndef __AMBAS_COMMON_H
#define __AMBAS_COMMON_H


#define AMBA_ERR_FUNC_NOT_SUPPORTED		(-248)

/*=========================Start AMBA_VIDEO_INFO==============================*/

#if 0
#define AMBA_VIDEO_FPS(fps)				(fps)
#define AMBA_VIDEO_FRAC_FPS(fps)		(fps)
#define AMBA_VIDEO_FPS_AUTO			0			//0
#define AMBA_VIDEO_FPS_1				512000000	//(512000000 / 1)
#define AMBA_VIDEO_FPS_2				256000000	//(512000000 / 2)
#define AMBA_VIDEO_FPS_3				170666667	//(512000000 / 3)
#define AMBA_VIDEO_FPS_4				128000000	//(512000000 / 4)
#define AMBA_VIDEO_FPS_5				102400000	//(512000000 / 5)
#define AMBA_VIDEO_FPS_6				85333333	//(512000000 / 6)
#define AMBA_VIDEO_FPS_10				51200000	//(512000000 / 10)
#define AMBA_VIDEO_FPS_15				34133333	//(512000000 / 15)
#define AMBA_VIDEO_FPS_20				25600000	//(512000000 / 20)
#define AMBA_VIDEO_FPS_24				21333333	//(512000000 / 24)
#define AMBA_VIDEO_FPS_25				20480000	//(512000000 / 25)
#define AMBA_VIDEO_FPS_30				17066667	//(512000000 / 30)
#define AMBA_VIDEO_FPS_50				10240000	//(512000000 / 50)
#define AMBA_VIDEO_FPS_60				8533333		//(512000000 / 60)
#define AMBA_VIDEO_FPS_120			4266667		//(512000000 / 120)
#define AMBA_VIDEO_FPS_29_97			17083750	//(512000000 / 2997 * 100)
#define AMBA_VIDEO_FPS_59_94			8541875		//(512000000 / 5994 * 100)
#define AMBA_VIDEO_FPS_23_976			21354688	//(512000000 / 23976 * 1000)
#define AMBA_VIDEO_FPS_12_5			40960000	//(512000000 / 25 * 2)
#define AMBA_VIDEO_FPS_6_25			81920000	//(512000000 / 25 * 4)
#define AMBA_VIDEO_FPS_3_125			163840000	//(512000000 / 25 * 8)
#define AMBA_VIDEO_FPS_7_5			68266667	//(512000000 / 15 * 2)
#define AMBA_VIDEO_FPS_3_75			136533333	//(512000000 / 15 * 4)
#else
#define AMBA_VIDEO_FPS(fps)			(fps)
#define AMBA_VIDEO_FRAC_FPS(fps)		(0x10000 + fps)
#define AMBA_VIDEO_FPS_AUTO			AMBA_VIDEO_FPS(0)
#define AMBA_VIDEO_FPS_1			AMBA_VIDEO_FPS(1)
#define AMBA_VIDEO_FPS_2			AMBA_VIDEO_FPS(2)
#define AMBA_VIDEO_FPS_3			AMBA_VIDEO_FPS(3)
#define AMBA_VIDEO_FPS_4			AMBA_VIDEO_FPS(4)
#define AMBA_VIDEO_FPS_5			AMBA_VIDEO_FPS(5)
#define AMBA_VIDEO_FPS_6			AMBA_VIDEO_FPS(6)
#define AMBA_VIDEO_FPS_10			AMBA_VIDEO_FPS(10)
#define AMBA_VIDEO_FPS_15			AMBA_VIDEO_FPS(15)
#define AMBA_VIDEO_FPS_20			AMBA_VIDEO_FPS(20)
#define AMBA_VIDEO_FPS_24			AMBA_VIDEO_FPS(24)
#define AMBA_VIDEO_FPS_25			AMBA_VIDEO_FPS(25)
#define AMBA_VIDEO_FPS_30			AMBA_VIDEO_FPS(30)
#define AMBA_VIDEO_FPS_50			AMBA_VIDEO_FPS(50)
#define AMBA_VIDEO_FPS_60			AMBA_VIDEO_FPS(60)
#define AMBA_VIDEO_FPS_120			AMBA_VIDEO_FPS(120)
#define AMBA_VIDEO_FPS_29_97			AMBA_VIDEO_FRAC_FPS(0)
#define AMBA_VIDEO_FPS_59_94			AMBA_VIDEO_FRAC_FPS(1)
#define AMBA_VIDEO_FPS_23_976			AMBA_VIDEO_FRAC_FPS(2)
#define AMBA_VIDEO_FPS_12_5			AMBA_VIDEO_FRAC_FPS(3)
#define AMBA_VIDEO_FPS_6_25			AMBA_VIDEO_FRAC_FPS(4)
#define AMBA_VIDEO_FPS_3_125			AMBA_VIDEO_FRAC_FPS(5)
#define AMBA_VIDEO_FPS_7_5			AMBA_VIDEO_FRAC_FPS(6)
#define AMBA_VIDEO_FPS_3_75			AMBA_VIDEO_FRAC_FPS(7)
#endif 

#define AMBA_VIDEO_FORMAT(format)		(format)
#define AMBA_VIDEO_FORMAT_PROGRESSIVE		AMBA_VIDEO_FORMAT(0)
#define AMBA_VIDEO_FORMAT_INTERLACE		AMBA_VIDEO_FORMAT(1)
#define AMBA_VIDEO_FORMAT_AUTO			AMBA_VIDEO_FORMAT(255)

#define AMBA_VIDEO_TYPE(type)			(type)
#define AMBA_VIDEO_TYPE_AUTO			AMBA_VIDEO_TYPE(0)
#define AMBA_VIDEO_TYPE_YUV_601			AMBA_VIDEO_TYPE(1)
#define AMBA_VIDEO_TYPE_YUV_656			AMBA_VIDEO_TYPE(2)
#define AMBA_VIDEO_TYPE_RGB_601			AMBA_VIDEO_TYPE(3)
#define AMBA_VIDEO_TYPE_RGB_656			AMBA_VIDEO_TYPE(4)
#define AMBA_VIDEO_TYPE_RGB_RAW			AMBA_VIDEO_TYPE(5)	//Sensor

#define AMBA_VIDEO_BITS(bits)			(bits)
#define AMBA_VIDEO_BITS_AUTO			AMBA_VIDEO_BITS(0)
#define AMBA_VIDEO_BITS_8			AMBA_VIDEO_BITS(8)
#define AMBA_VIDEO_BITS_10			AMBA_VIDEO_BITS(10)
#define AMBA_VIDEO_BITS_12			AMBA_VIDEO_BITS(12)
#define AMBA_VIDEO_BITS_16			AMBA_VIDEO_BITS(16)

#define AMBA_VIDEO_RATIO(ratio)			(ratio)
#define AMBA_VIDEO_RATIO_AUTO			AMBA_VIDEO_RATIO(0)
#define AMBA_VIDEO_RATIO_4_3			AMBA_VIDEO_RATIO(1)
#define AMBA_VIDEO_RATIO_16_9			AMBA_VIDEO_RATIO(2)
#define AMBA_VIDEO_RATIO_1_1			AMBA_VIDEO_RATIO(4)

#define AMBA_VIDEO_SYSTEM_AUTO			(0x0)
#define AMBA_VIDEO_SYSTEM_NTSC			(0x1)
#define AMBA_VIDEO_SYSTEM_PAL			(0x2)
#define AMBA_VIDEO_SYSTEM_SECAM			(0x4)
#define AMBA_VIDEO_SYSTEM_ALL			(0xF)

/*============================================================================*/

typedef unsigned char AM_U8;
typedef unsigned short AM_U16;
typedef unsigned long AM_U32;
typedef unsigned long long AM_U64;
typedef int AM_INT;
typedef unsigned int AM_UINT;

enum AM_ERR
{
    ME_OK = 0,
    ME_WAIT,
    ME_ERROR,
    ME_CLOSED,
    ME_BUSY,
    ME_INTERNAL_ERROR,
    ME_NO_IMPL,
    ME_OS_ERROR,
    ME_IO_ERROR,
    ME_TIMEOUT,
    ME_NO_MEMORY,
    ME_TOO_MANY,

    ME_NOT_EXIST,
    ME_NOT_SUPPORT,
    ME_NO_INTERFACE,
    ME_BAD_STATE,
    ME_BAD_PARAM,
    ME_BAD_COMMAND,

    ME_UNKNOWN_FMT,
};

struct amba_video_info {
	AM_U16	width;
	AM_U16	height;
	AM_U8	fps;
	AM_U8	format;
	AM_U8	type;
	AM_U8	bits;
	AM_U8	ratio;
	AM_U8	system;
	AM_U16	rev;
};

/* ======================= Standart format defines ========================== */
enum amba_video_mode {
	AMBA_VIDEO_MODE_AUTO		= 0,

	AMBA_VIDEO_MODE_320_240		= 1,		//320x240
	AMBA_VIDEO_MODE_320_288		= 2,		//320x288
	AMBA_VIDEO_MODE_360_240		= 3,		//360x240
	AMBA_VIDEO_MODE_360_288		= 4,		//360x288
	AMBA_VIDEO_MODE_480_240		= 5,		//480x240
	AMBA_VIDEO_MODE_720_240		= 6,		//720x240
	AMBA_VIDEO_MODE_960_240		= 7,		//960x240
	AMBA_VIDEO_MODE_VGA		= 8,		//640x480
	AMBA_VIDEO_MODE_SVGA		= 9,		//800x600
	AMBA_VIDEO_MODE_XGA		= 10,		//1024x768
	AMBA_VIDEO_MODE_SXGA		= 11,		//1280x1024
	AMBA_VIDEO_MODE_UXGA		= 12,		//1600x1200
	AMBA_VIDEO_MODE_QXGA		= 13,		//2048x1536
	AMBA_VIDEO_MODE_WVGA		= 14,		//800x480
	AMBA_VIDEO_MODE_WSVGA		= 15,		//1024x600
	AMBA_VIDEO_MODE_1280_960	= 16,		//1280x960
	AMBA_VIDEO_MODE_WXGA		= 17,		//1280x800
	AMBA_VIDEO_MODE_WSXGA		= 18,		//1440x900
	AMBA_VIDEO_MODE_WSXGAP		= 19,		//1680x1050
	AMBA_VIDEO_MODE_WUXGA		= 20,		//1920x1200

	/* Add new format below and update AMBA_VIDEO_MODE_NUM*/
	AMBA_VIDEO_MODE_480_640		= 21,		//480x640
	AMBA_VIDEO_MODE_SXGAP		= 22,		//1400x1050
	AMBA_VIDEO_MODE_QSXGA		= 23,		//2592x1944

	//Still Standard
	AMBA_VIDEO_MODE_3M_4_3		= 0xFFE0,
	AMBA_VIDEO_MODE_3M_16_9		= 0xFFE1,
	AMBA_VIDEO_MODE_4M_4_3		= 0xFFE2,
	AMBA_VIDEO_MODE_4M_16_9		= 0xFFE3,
	AMBA_VIDEO_MODE_5M_4_3		= 0xFFE4,
	AMBA_VIDEO_MODE_5M_16_9		= 0xFFE5,

	//Video Standard
	AMBA_VIDEO_MODE_480I		= 0xFFF0,
	AMBA_VIDEO_MODE_576I		= 0xFFF1,
	AMBA_VIDEO_MODE_D1_NTSC		= 0xFFF2,	//480p
	AMBA_VIDEO_MODE_D1_PAL		= 0xFFF3,	//576p
	AMBA_VIDEO_MODE_720P		= 0xFFF4,
	AMBA_VIDEO_MODE_720P_PAL	= 0xFFF5,	//720p50
	AMBA_VIDEO_MODE_1080I		= 0xFFF6,
	AMBA_VIDEO_MODE_1080I_PAL	= 0xFFF7,	//1080i50
	AMBA_VIDEO_MODE_1080P		= 0xFFF8,
	AMBA_VIDEO_MODE_1080P_PAL	= 0xFFF9,	//1080i50
	AMBA_VIDEO_MODE_1080I48		= 0xFFFA,	//1080i48
	AMBA_VIDEO_MODE_1080P24		= 0xFFFB,	//1080p24

	AMBA_VIDEO_MODE_TEST		= 0xFFFE,
	AMBA_VIDEO_MODE_MAX	= 0xFFFF,
};
#define AMBA_VIDEO_MODE_MISC_NUM	(AMBA_VIDEO_MODE_QSXGA - AMBA_VIDEO_MODE_AUTO + 1)
#define AMBA_VIDEO_MODE_STILL_NUM	(AMBA_VIDEO_MODE_5M_16_9 - AMBA_VIDEO_MODE_3M_4_3 + 1)
#define AMBA_VIDEO_MODE_STANDARD_NUM	(AMBA_VIDEO_MODE_1080P24 - AMBA_VIDEO_MODE_480I + 1)
#define AMBA_VIDEO_MODE_NUM		(AMBA_VIDEO_MODE_MISC_NUM + AMBA_VIDEO_MODE_STILL_NUM + AMBA_VIDEO_MODE_STANDARD_NUM)


enum amba_video_sync_polarity {
	AMBA_VIDEO_SYNC_ACTIVE_LOW = 0,
	AMBA_VIDEO_SYNC_ACTIVE_HIGH = 1,
};

/*============================================================================*/
#define AMBA_VIDEO_PAL_W			(720)
#define AMBA_VIDEO_PAL_H			(576)

#define AMBA_VIDEO_NTSC_W			(720)
#define AMBA_VIDEO_NTSC_H			(480)

#define AMBA_VIDEO_720P_W			(1280)
#define AMBA_VIDEO_720P_H			(720)

#define AMBA_VIDEO_1080P_W			(1920)
#define AMBA_VIDEO_1080P_H			(1080)

#define AMBA_VIDEO_VGA_W			(640)
#define AMBA_VIDEO_VGA_H			(480)

#define AMBA_VIDEO_SVGA_W			(800)
#define AMBA_VIDEO_SVGA_H			(600)

#define AMBA_VIDEO_XGA_W			(1024)
#define AMBA_VIDEO_XGA_H			(768)

#define AMBA_VIDEO_WXGA_W			(1280)
#define AMBA_VIDEO_WXGA_H			(800)

#define AMBA_VIDEO_SXGA_W			(1280)
#define AMBA_VIDEO_SXGA_H			(1024)

#define AMBA_VIDEO_WSXGA_W			(1440)
#define AMBA_VIDEO_WSXGA_H			(900)

#define AMBA_VIDEO_WSXGAP_W			(1680)
#define AMBA_VIDEO_WSXGAP_H			(1050)

#define AMBA_VIDEO_UXGA_W			(1600)
#define AMBA_VIDEO_UXGA_H			(1200)

#define AMBA_VIDEO_WUXGA_W			(1920)
#define AMBA_VIDEO_WUXGA_H			(1200)

#define AMBA_VIDEO_STANDARD_ALIAS(mode, fps) \
	( \
	(((AM_U32)(fps) & 0xFFFF) << 16) | \
	(((AM_U32)(mode) & 0xFFFF) << 0) \
	)
#define AMBA_VIDEO_STANDARD_MODE(info)	(((AM_U32)(info) >> 0) & 0xFFFF)
#define AMBA_VIDEO_STANDARD_FPS(info)	(((AM_U32)(info) >> 16) & 0xFFFF)

#define	AMBA_VIDEO_STANDARD_480I	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_480I, AMBA_VIDEO_FPS_29_97)
#define	AMBA_VIDEO_STANDARD_576I	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_576I, AMBA_VIDEO_FPS_25)
#define	AMBA_VIDEO_STANDARD_480P	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_D1_NTSC, AMBA_VIDEO_FPS_59_94)
#define	AMBA_VIDEO_STANDARD_576P	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_D1_PAL, AMBA_VIDEO_FPS_50)
#define	AMBA_VIDEO_STANDARD_720P	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_720P, AMBA_VIDEO_FPS_59_94)
#define	AMBA_VIDEO_STANDARD_720P50	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_720P, AMBA_VIDEO_FPS_50)
#define	AMBA_VIDEO_STANDARD_1080I	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_1080I, AMBA_VIDEO_FPS_29_97)
#define	AMBA_VIDEO_STANDARD_1080I50	AMBA_VIDEO_STANDARD_ALIAS(AMBA_VIDEO_MODE_1080I, AMBA_VIDEO_FPS_25)

/*=========================End AMBA_VIDEO_INFO================================*/

#endif

